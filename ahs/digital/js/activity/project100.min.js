jQuery(function(s) {
    function a() {
        h.css("margin-top", 0),
        e = h.height(),
        e > r ? (!f.hasClass("disabled") && f.addClass("disabled"), C.hasClass("disabled") && C.removeClass("disabled"), n = h.children().eq(0).height(), t = Math.floor(r / n) * n) : (!f.hasClass("disabled") && f.addClass("disabled"), !C.hasClass("disabled") && C.addClass("disabled"))
    }
    function i(a) {
        var i = "boolean" == typeof a;
        if (i) {
            if (!a) return;
            k.css("margin-left", 0),
            b = k.children();
            var d = b.eq(0);
            u = d.outerWidth(!0),
            p = d.outerHeight(!0),
            m = Math.floor(j / u * 2),
            g = m / 2 * u,
            a = b
        }
        var l;
        if (v = a.length, !y.hasClass("disabled") && y.addClass("disabled"), m > v ? !M.hasClass("disabled") && M.addClass("disabled") : M.hasClass("disabled") && M.removeClass("disabled"), i) a.each(function(a, i) {
            l = a % 2 === 0,
            s(i).css({
                left: u * Math.floor(a / 2),
                top: p * (l ? 0 : 1)
            })
        });
        else for (var e = v; e--;) l = e % 2 === 0,
        a[e].css({
            left: u * Math.floor(e / 2),
            top: p * (l ? 0 : 1)
        })
    }
    function d() {
        a(),
        i(!0),
        F = h.children()
    }
    var l = s("#js-project100-popup");
    s("#js-three-things").on("click", ".btu",
    function() {
        l.addClass("show")
    }),
    l.on("click",
    function() {
        l.removeClass("show")
    });
    var e, n, t, o = s("#js-shop-address"),
    c = o.find("div.shop-nav"),
    r = c.height(),
    h = c.find("ul.shop-nav-list"),
    f = o.find("div.up"),
    C = o.find("div.down");
    a(),
    f.on("click",
    function() {
        if (!f.hasClass("disabled")) {
            C.hasClass("disabled") && C.removeClass("disabled");
            var s = parseFloat(h.css("margin-top")); - s > t ? h.css("margin-top", s + t) : (h.css("margin-top", 0), f.addClass("disabled"))
        }
    }),
    C.on("click",
    function() {
        if (!C.hasClass("disabled")) {
            f.hasClass("disabled") && f.removeClass("disabled");
            var s = parseFloat(h.css("margin-top")),
            a = e - t + s;
            a > t ? h.css("margin-top", s - t) : (h.css("margin-top", s - a), C.addClass("disabled"))
        }
    });
    var v, b, u, p, m, g, w = o.find("div.shop-content"),
    j = w.width(),
    k = w.find("ul.shop-content-list"),
    y = o.find("div.left"),
    M = o.find("div.right");
    i(!0),
    y.on("click",
    function() {
        if (!y.hasClass("disabled")) {
            M.hasClass("disabled") && M.removeClass("disabled");
            var s = parseFloat(k.css("margin-left")); - s > g ? k.css("margin-left", s + g) : (k.css("margin-left", 0), y.addClass("disabled"))
        }
    }),
    M.on("click",
    function() {
        if (!M.hasClass("disabled")) {
            y.hasClass("disabled") && y.removeClass("disabled");
            var s = parseFloat(k.css("margin-left")),
            a = Math.ceil(v / 2) * u - g + s;
            a > g ? k.css("margin-left", s - g) : (k.css("margin-left", s - a), M.addClass("disabled"))
        }
    });
    var F = h.children(),
    q = 0;
    h.on("click", "li",
    function() {
        var a = s(this);
        if (!a.hasClass("current")) {
            F.eq(q).removeClass("current"),
            a.addClass("current"),
            q = a.index();
            var d = a.data("id"),
            l = [];
            k.css("margin-left", 0),
            b.each(function(a, i) {
                var e = s(i);
                d && e.data("regionId") !== d ? e.hasClass("show") && e.removeClass("show") : (!e.hasClass("show") && e.addClass("show"), l.push(e))
            }),
            i(l)
        }
    });
    var x = s("#js-shop-city-lists"),
    H = x.find("ul.nav > li"),
    I = x.find("ul.content > li");
    s("#js-shop-city-nav").on("click", "li",
    function() {
        var a = s(this),
        i = a.data("id");
        i && !a.hasClass("active") && (a.siblings().removeClass("active").end().addClass("active"), H.each(function(a, d) {
            i === s(d).data("id") && h.html(s(d).find("li").clone())
        }), I.each(function(a, d) {
            i === s(d).data("id") && k.html(s(d).find("li").clone())
        }), d())
    }),
    !-[1] && s("body").width() < 1309 && s("#project100").addClass("ie678");
     // hover css
	$("#service_one li").each(function(i,ele){
		$(ele).find("div.li_bor").hover(function(){
			$("#service_one li i").removeClass("onPIC");
			$("#service_two li i").removeClass("onPIC");
			$(this).find("i").addClass("onPIC");
			$("#service_two li").removeClass("on");
			$(ele).addClass("on").siblings().removeClass("on");
			
		});
	});
	$("#service_two li").each(function(i,ele){
		$(ele).find("div.li_bor").hover(function(){
			$("#service_one li i").removeClass("onPIC");
			$("#service_two li i").removeClass("onPIC");
			$(this).find("i").addClass("onPIC");
			$("#service_one li").removeClass("on");
			$(ele).addClass("on").siblings().removeClass("on");
			
		});
	});
	$("#service_one li").click(function(){
		master();
		$(".info-pop").show();
	});
	$("#service_two li").eq(0).click(function(){master();$(".info-pop").show();});
	$("#service_two li").eq(1).click(function(){master();$(".info-pop").show();});
	$("#service_two li").eq(2).click(function(){
		master();
		$(".else-info-pop").show();
	});
    	$(".close-pop").click(function(){
    		$(".else-info-pop").hide();
    		$(".info-pop").hide();
    		$("#overlay").remove();
    	});
    	
    	function master() {
        var docHeight = $(document.body).height();
        $('body').append('<div id="overlay"></div>');
        $('#overlay').height(docHeight)
            .css({
                'display': 'block',
                'opacity': .8,
                'position': 'fixed',
                'top': 0,
                'left': 0,
                'background-color': '#000000',
                'width': '100%',
                'height': '100%',
                'z-index':100
            });
    };
    var region = [{
                id : 1,
                city : "上海"
            },{
                id : 31,
                city : "北京"
            },{
                id : 256,
                city : "深圳"
            },{
                id : 103,
                city : "广州"
            }
        ];
    function setCity(result){
        var cityName = result.name;
        var cityId = null;
        for (var i = 0 , len = region.length; i < len; i++) {
            cityId = cityName.indexOf(region[i].city) > -1 ? region[i].id : null;
            if(cityId){
                break;
            }
        }
        cityId = cityId || 103;
        $('#js-shop-city-nav li[data-id="'+cityId+'"]').trigger('click');
    }

    //根据城市选择门店
    var city = new BMap.LocalCity();
    city.get(setCity);

    window.onscroll = function(){
        $("#header").offset().top == 0 ? $(".backup").show() : $(".backup").hide();
    }
});